# =============================================================================
# Balungpisah API Configuration
# =============================================================================
# Copy this file to .env and fill in the required values.
# Variables marked as REQUIRED must be set for the application to start.
# Variables marked as OPTIONAL have sensible defaults.

# =============================================================================
# Application Settings
# =============================================================================

# Server host (default: 127.0.0.1)
# HOST=127.0.0.1

# Server port (default: 3000)
# PORT=3000

# CORS allowed origins, comma-separated (default: *)
# CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com

# Maximum request body size in bytes (default: 10485760 = 10MB)
# MAX_REQUEST_BODY_SIZE=10485760

# Frontend URL for redirects (default: http://localhost:3000)
# FRONTEND_URL=http://localhost:3000

# Log level (default: info,balungpisah_core=debug)
# RUST_LOG=info,balungpisah_core=debug

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================

# REQUIRED: PostgreSQL connection string
DATABASE_URL=postgres://user:password@localhost:5432/balungpisah_core

# Maximum number of connections in the pool (default: 10)
# Recommended: 10-20 for small-medium apps, up to 100 for high traffic
# DB_MAX_CONNECTIONS=10

# Minimum number of connections in the pool (default: 1)
# DB_MIN_CONNECTIONS=1

# Connection acquire timeout in seconds (default: 5)
# How long to wait for a connection from the pool
# DB_ACQUIRE_TIMEOUT_SECS=5

# Idle connection timeout in seconds (default: 600 = 10 minutes)
# Connections idle longer than this are closed
# DB_IDLE_TIMEOUT_SECS=600

# Maximum connection lifetime in seconds (default: 1800 = 30 minutes)
# Connections older than this are recycled to prevent stale connections
# DB_MAX_LIFETIME_SECS=1800

# =============================================================================
# Authentication (Logto OIDC)
# =============================================================================

# REQUIRED: OIDC issuer URL
LOGTO_ISSUER=https://auth.example.com/oidc

# REQUIRED: API audience identifier
LOGTO_AUDIENCE=https://api.example.com

# JWKS cache TTL in seconds (default: 3600 = 1 hour)
# How long to cache the public keys from the OIDC provider
# JWKS_CACHE_TTL=3600

# JWT validation leeway in seconds (default: 60 = 1 minute)
# Tolerance for clock skew in JWT expiration checks
# JWT_LEEWAY=60

# =============================================================================
# Logto Machine-to-Machine (M2M) Authentication
# =============================================================================

# REQUIRED: M2M application client ID
LOGTO_M2M_CLIENT_ID=your-m2m-client-id

# REQUIRED: M2M application client secret
LOGTO_M2M_CLIENT_SECRET=your-m2m-client-secret

# M2M resource/API identifier (default: https://default.logto.app/api)
# LOGTO_M2M_RESOURCE=https://default.logto.app/api

# M2M scope (default: all)
# LOGTO_M2M_SCOPE=all

# =============================================================================
# Swagger/OpenAPI Documentation
# =============================================================================

# Basic auth username for Swagger UI (optional, disabled if empty)
# SWAGGER_USERNAME=admin

# Basic auth password for Swagger UI (optional, disabled if empty)
# SWAGGER_PASSWORD=admin

# API title displayed in Swagger UI (default: Balungpisah API)
# SWAGGER_TITLE=Balungpisah API

# API version (default: 0.1.0)
# SWAGGER_VERSION=0.1.0

# API description (default: API documentation for Balungpisah)
# SWAGGER_DESCRIPTION=API documentation for Balungpisah

# =============================================================================
# MinIO/S3 Storage Configuration
# =============================================================================

# MinIO endpoint URL (default: http://localhost:9000)
# MINIO_ENDPOINT=http://localhost:9000

# MinIO access key (default: minioadmin)
# MINIO_ACCESS_KEY=minioadmin

# MinIO secret key (default: minioadmin)
# MINIO_SECRET_KEY=minioadmin

# Bucket name for storing files (default: balungpisah-uploads)
# MINIO_BUCKET=balungpisah-uploads

# AWS region for S3 compatibility (default: us-east-1)
# MINIO_REGION=us-east-1

# Presigned URL expiry time in seconds (default: 3600 = 1 hour)
# MINIO_PRESIGNED_URL_EXPIRY_SECS=3600

# =============================================================================
# Agent Gateway (TensorZero) & ADK Configuration
# =============================================================================

# REQUIRED: Separate database for ADK conversation storage
# ADK uses its own database to keep conversation data isolated from core data
ADK_DATABASE_URL=postgres://user:password@localhost:5432/balungpisah_adk

# TensorZero gateway URL (default: http://localhost:3001)
# TENSORZERO_URL=http://localhost:3001

# REQUIRED: OpenAI API key for LLM access
OPENAI_API_KEY=sk-your-openai-api-key

# Model name to use for agent (default: gpt-5-nano)
# AGENT_MODEL_NAME=gpt-5-nano
